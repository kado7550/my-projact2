import streamlit as st
from PIL import Image
import os

st.set_page_config(page_title="ë°°ê·¸ ì´ê¸° ì¶”ì²œê¸°", layout="centered")
st.title("ğŸ® ë°°ê·¸ ì‹¤ë ¥ ê¸°ë°˜ ì´ê¸° ë° íŒŒì¸  ì¶”ì²œê¸°")
st.write("í”Œë ˆì´ì–´ì˜ ì‹¤ë ¥ê³¼ í”Œë ˆì´ ì‹œê°„ì— ë§ëŠ” ê·¼ì ‘ì „/ì €ê²©ì „ ì¶”ì²œ ë¬´ê¸°, íŒŒì¸ , ë°°ìœ¨ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.")

# ì‚¬ìš©ì ì…ë ¥
time_played = st.slider("ì´ í”Œë ˆì´ ì‹œê°„ (ì‹œê°„ ë‹¨ìœ„)", 0, 1000, 50)
days_played = st.slider("í”Œë ˆì´í•œ ì¼ ìˆ˜", 0, 365, 30)
kd = st.slider("K/D ë¹„ìœ¨", 0.0, 10.0, 1.0, 0.1)
avg_damage = st.slider("í‰ê·  ë”œëŸ‰", 0, 1000, 150)
win_rate = st.slider("ìŠ¹ë¥  (%)", 0, 100, 5)

# ì´ê¸° ì¶”ì²œ ë¡œì§
def recommend_weapons(kd, dmg, win, hours, days):
    score = (kd * 2 + dmg / 100 + win / 10 + hours / 100 + days / 30)

    if score < 10:
        return {
            "ë ˆë²¨": "ì´ˆë³´ì",
            "ê·¼ì ‘": [
                {
                    "ì´ë¦„": "UMP45",
                    "ì„±ëŠ¥": "ë‚®ì€ ë°˜ë™ê³¼ ì•ˆì •ì ì¸ ì¡°ì‘ì„±",
                    "íŒŒì¸ ": ["ì†ŒìŒê¸°", "ìˆ˜ì§ ì†ì¡ì´"],
                    "ë°°ìœ¨": "Red Dot",
                    "íƒ„ ì¢…ë¥˜": ".45 ACP",
                    "ì´ë¯¸ì§€": "images/ump45.jpg"
                },
                {
                    "ì´ë¦„": "Vector",
                    "ì„±ëŠ¥": "ë¹ ë¥¸ ì—°ì‚¬ ì†ë„, ê·¼ê±°ë¦¬ì—ì„œ ê°•ë ¥í•¨",
                    "íŒŒì¸ ": ["ì†ŒìŒê¸°", "ì•µê¸€ ì†ì¡ì´"],
                    "ë°°ìœ¨": "í™€ë¡œê·¸ë¨",
                    "íƒ„ ì¢…ë¥˜": ".45 ACP",
                    "ì´ë¯¸ì§€": "images/vector.jpg"
                }
            ],
            "ì €ê²©": [
                {
                    "ì´ë¦„": "SKS",
                    "ì„±ëŠ¥": "ì´ˆë³´ìì—ê²Œ ì ë‹¹í•œ ë°˜ìë™ ì €ê²©ì´",
                    "íŒŒì¸ ": ["ì†ŒìŒê¸°", "ì²™ì¶” ì†ì¡ì´"],
                    "ë°°ìœ¨": "4ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": "7.62mm",
                    "ì´ë¯¸ì§€": "images/sks.jpg"
                },
                {
                    "ì´ë¦„": "Mini14",
                    "ì„±ëŠ¥": "ë‚®ì€ íƒ„í¼ì§, ë¹ ë¥¸ ì—°ì‚¬",
                    "íŒŒì¸ ": ["ë³´ì •ê¸°", "ì²´í¬ íŒ¨ë“œ"],
                    "ë°°ìœ¨": "3ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": "5.56mm",
                    "ì´ë¯¸ì§€": "images/mini14.jpg"
                }
            ]
        }
    elif score < 18:
        return {
            "ë ˆë²¨": "ì¤‘ê¸‰ì",
            "ê·¼ì ‘": [
                {
                    "ì´ë¦„": "M416",
                    "ì„±ëŠ¥": "ì „ì²œí›„ ì‚¬ìš© ê°€ëŠ¥, ì•ˆì •ì ì¸ ë°˜ë™ ì œì–´",
                    "íŒŒì¸ ": ["ë³´ì •ê¸°", "ìˆ˜ì§ ì†ì¡ì´"],
                    "ë°°ìœ¨": "Red Dot",
                    "íƒ„ ì¢…ë¥˜": "5.56mm",
                    "ì´ë¯¸ì§€": "images/m416.jpg"
                },
                {
                    "ì´ë¦„": "Beryl M762",
                    "ì„±ëŠ¥": "ë†’ì€ ë°ë¯¸ì§€, ì–´ë ¤ìš´ ë°˜ë™",
                    "íŒŒì¸ ": ["ì•µê¸€ ì†ì¡ì´", "ë³´ì •ê¸°"],
                    "ë°°ìœ¨": "2ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": "7.62mm",
                    "ì´ë¯¸ì§€": "images/beryl.jpg"
                }
            ],
            "ì €ê²©": [
                {
                    "ì´ë¦„": "SLR",
                    "ì„±ëŠ¥": "ê°•í•œ ë°˜ë™ê³¼ ë†’ì€ ë°ë¯¸ì§€",
                    "íŒŒì¸ ": ["ë³´ì •ê¸°", "ì²™ì¶” ì†ì¡ì´"],
                    "ë°°ìœ¨": "6ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": "7.62mm",
                    "ì´ë¯¸ì§€": "images/slr.jpg"
                },
                {
                    "ì´ë¦„": "Mini14",
                    "ì„±ëŠ¥": "ê· í˜• ì¡íŒ ì €ê²©ì´",
                    "íŒŒì¸ ": ["ë³´ì •ê¸°", "ì²´í¬ íŒ¨ë“œ"],
                    "ë°°ìœ¨": "3ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": "5.56mm",
                    "ì´ë¯¸ì§€": "images/mini14.jpg"
                }
            ]
        }
    else:
        return {
            "ë ˆë²¨": "ê³ ìˆ˜",
            "ê·¼ì ‘": [
                {
                    "ì´ë¦„": "Mk47 Mutant",
                    "ì„±ëŠ¥": "ë‹¨ë°œ í™”ë ¥ ê°•ë ¥, ê³ ë‚œì´ë„",
                    "íŒŒì¸ ": ["ì†ŒìŒê¸°", "ì²´í¬ íŒ¨ë“œ"],
                    "ë°°ìœ¨": "3ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": "7.62mm",
                    "ì´ë¯¸ì§€": "images/mk47.jpg"
                },
                {
                    "ì´ë¦„": "Beryl M762",
                    "ì„±ëŠ¥": "ë†’ì€ DPS, ë°˜ë™ ì œì–´ í•„ìˆ˜",
                    "íŒŒì¸ ": ["ë³´ì •ê¸°", "ìˆ˜ì§ ì†ì¡ì´"],
                    "ë°°ìœ¨": "2ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": "7.62mm",
                    "ì´ë¯¸ì§€": "images/beryl.jpg"
                }
            ],
            "ì €ê²©": [
                {
                    "ì´ë¦„": "Mk14",
                    "ì„±ëŠ¥": "DMR ì¤‘ ìµœê°• í™”ë ¥, ë°˜ë™ ë†’ìŒ",
                    "íŒŒì¸ ": ["ì†ŒìŒê¸°", "DMR ì†ì¡ì´"],
                    "ë°°ìœ¨": "6ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": "7.62mm",
                    "ì´ë¯¸ì§€": "images/mk14.jpg"
                },
                {
                    "ì´ë¦„": "AWM",
                    "ì„±ëŠ¥": "ê°€ì¥ ê°•ë ¥í•œ ë³¼íŠ¸ì•¡ì…˜ ì €ê²©ì´",
                    "íŒŒì¸ ": ["ì†ŒìŒê¸°"],
                    "ë°°ìœ¨": "8ë°°ìœ¨",
                    "íƒ„ ì¢…ë¥˜": ".300 Magnum",
                    "ì´ë¯¸ì§€": "images/awm.jpg"
                }
            ]
        }

# ì¶”ì²œ ì‹¤í–‰
if st.button("ğŸ” ì¶”ì²œ ë°›ê¸°"):
    result = recommend_weapons(kd, avg_damage, win_rate, time_played, days_played)
    st.subheader(f"ğŸ¯ ì¶”ì²œ ê²°ê³¼ - {result['ë ˆë²¨']}")

    for category in ["ê·¼ì ‘", "ì €ê²©"]:
        st.markdown(f"### ğŸ§© {category}ì „ ì¶”ì²œ")
        for weapon in result[category]:
            st.markdown(f"**ğŸ”« {weapon['ì´ë¦„']}**")
            st.markdown(f"- ì„±ëŠ¥: {weapon['ì„±ëŠ¥']}")
            st.markdown(f"- ì¶”ì²œ íŒŒì¸ : {', '.join(weapon['íŒŒì¸ '])}")
            st.markdown(f"- ì¶”ì²œ ë°°ìœ¨: {weapon['ë°°ìœ¨']}")
            st.markdown(f"- íƒ„ ì¢…ë¥˜: {weapon['íƒ„ ì¢…ë¥˜']}")
            if os.path.exists(weapon['ì´ë¯¸ì§€']):
                st.image(Image.open(weapon['ì´ë¯¸ì§€']), width=400)
            else:
                st.markdown("(ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤)")
